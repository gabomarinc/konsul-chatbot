COPIA Y PEGA ESTE C√ìDIGO COMPLETO EN LA CONSOLA:

(async function testCustomFields() {
    console.log('üß™ ==========================================');
    console.log('üß™ INICIANDO PRUEBAS DE CAMPOS PERSONALIZADOS');
    console.log('üß™ ==========================================\n');

    // Buscar API disponible
    let api = null;
    if (window.gptmakerAPI) {
        api = window.gptmakerAPI;
        console.log('‚úÖ Usando window.gptmakerAPI\n');
    } else if (window.dashboard && window.dashboard.api) {
        api = window.dashboard.api;
        console.log('‚úÖ Usando window.dashboard.api\n');
    } else if (window.dashboard && window.dashboard.dataService && window.dashboard.dataService.api) {
        api = window.dashboard.dataService.api;
        console.log('‚úÖ Usando window.dashboard.dataService.api\n');
    } else if (typeof GPTMakerAPI !== 'undefined') {
        console.log('‚ö†Ô∏è Creando nueva instancia de GPTMakerAPI...\n');
        api = new GPTMakerAPI();
        console.log('‚úÖ Nueva instancia creada\n');
    }
    
    if (!api) {
        console.error('‚ùå GPTMakerAPI no est√° disponible');
        console.log('\nüí° Intenta:');
        console.log('   1. Esperar 5-10 segundos y ejecutar de nuevo');
        console.log('   2. Recargar la p√°gina (F5) y esperar a que cargue');
        console.log('   3. Verificar que tengas un token de GPTMaker configurado\n');
        return;
    }

    // Obtener campos personalizados
    console.log('üìã PASO 1: Obteniendo campos personalizados del workspace...\n');
    try {
        const customFieldsResult = await api.getCustomFields();
        
        if (customFieldsResult.success) {
            console.log(`‚úÖ Se encontraron ${customFieldsResult.data.length} campos personalizados:\n`);
            
            const camposNecesarios = [
                'Zona de Interes',
                'Perfil Laboral',
                'DUI',
                'Constancia de salario',
                'Comprobante de AFP',
                'Declaraci√≥n de renta',
                'Comprobante de domicilio',
                'Declaraciones de impuestos (1-2 a√±os)',
                'Estados de cuenta bancarios personales o del domicilio',
                'Constancias de ingreso o contratos con clientes'
            ];

            console.log('üìä CAMPOS PERSONALIZADOS ENCONTRADOS:');
            customFieldsResult.data.forEach((field, index) => {
                console.log(`${index + 1}. "${field.name}"`);
                console.log(`   - ID: ${field.id}`);
                console.log(`   - JSON Name: ${field.jsonName || 'N/A'}`);
                console.log(`   - Tipo: ${field.type || 'N/A'}`);
                console.log('');
            });

            console.log('\nüìã COMPARACI√ìN: CAMPOS NECESARIOS vs ENCONTRADOS:');
            camposNecesarios.forEach((campoNecesario) => {
                const encontrado = customFieldsResult.data.find(field => 
                    field.name?.toLowerCase().includes(campoNecesario.toLowerCase()) || 
                    campoNecesario.toLowerCase().includes(field.name?.toLowerCase())
                );
                if (encontrado) {
                    console.log(`‚úÖ "${campoNecesario}" ‚Üí Encontrado como "${encontrado.name}"`);
                } else {
                    console.log(`‚ùå "${campoNecesario}" ‚Üí NO ENCONTRADO (necesita crearse)`);
                }
            });

            // Guardar para uso posterior
            window.customFieldsData = customFieldsResult.data;
            console.log('\n‚úÖ Datos guardados en window.customFieldsData');

        } else {
            console.error('‚ùå Error obteniendo campos personalizados:', customFieldsResult.error);
        }
    } catch (error) {
        console.error('‚ùå Error:', error);
    }

    // Analizar estructura de chat
    console.log('\n\nüí¨ PASO 2: Analizando estructura de un chat...\n');
    try {
        let dataService = null;
        if (window.dataService) {
            dataService = window.dataService;
        } else if (window.dashboard && window.dashboard.dataService) {
            dataService = window.dashboard.dataService;
        } else if (typeof DataService !== 'undefined' && api) {
            dataService = new DataService(api);
        }
        
        if (dataService) {
            const chatsResult = await dataService.getAllChats({ pageSize: 1 });
            
            if (chatsResult.success && chatsResult.data && chatsResult.data.length > 0) {
                const chat = chatsResult.data[0];
                console.log('‚úÖ Chat de ejemplo obtenido:\n');
                console.log('üìä ESTRUCTURA DEL CHAT:');
                console.log('ID:', chat.id);
                console.log('Nombre:', chat.name || 'N/A');
                console.log('Usuario:', chat.userName || 'N/A');
                console.log('Tel√©fono:', chat.whatsappPhone || 'N/A');
                console.log('\nüìã TODAS LAS PROPIEDADES:');
                console.log(JSON.stringify(chat, null, 2));
                
                window.exampleChat = chat;
            }
        } else {
            console.log('‚ö†Ô∏è DataService no disponible, saltando an√°lisis de chats');
        }
    } catch (error) {
        console.error('‚ùå Error analizando chat:', error);
    }

    console.log('\n\n‚úÖ ==========================================');
    console.log('‚úÖ PRUEBAS COMPLETADAS');
    console.log('‚úÖ ==========================================\n');
})();




